/api/users:
  get:
    summary: Get all users (Admin only)
    tags: [Users]
    responses:
      200:
        description: List of all users
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '../components/schemas/User.yaml'
      401:
        description: Unauthorized
      403:
        description: Forbidden (Non-admin)

/api/users/me:
  get:
    summary: Get current user profile
    tags: [Users]
    responses:
      200:
        description: Current user profile
        content:
          application/json:
            schema:
              $ref: '../components/schemas/User.yaml'
      401:
        description: Unauthorized
  put:
    summary: Update current user profile
    tags: [Users]
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              email:
                type: string
                format: email
              username:
                type: string
              password:
                type: string
                minLength: 8
    responses:
      200:
        description: User updated successfully
      400:
        description: Validation error
      401:
        description: Unauthorized
  delete:
    summary: Delete current user account
    tags: [Users]
    responses:
      204:
        description: User deleted successfully
      401:
        description: Unauthorized

/api/users/{id}/role:
  patch:
    summary: Update user role (Admin only)
    tags: [Users]
    parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        required: true
        description: User ID
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - role
            properties:
              role:
                type: string
                enum: [USER, ADMIN]
    responses:
      200:
        description: Role updated successfully
      401:
        description: Unauthorized
      403:
        description: Forbidden (Non-admin)
      404:
        description: User not found
